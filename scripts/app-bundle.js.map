{"version":3,"sources":["app.js","auth-config.js","environment.js","main.js","models/faq.js","resources/index.js","views/faq/create-faq.js","views/faq/faq.js","views/login/login.js"],"names":["App","router","fetchConfig","activate","configure","configureRouter","config","title","addPipelineStep","map","route","name","moduleId","nav","auth","configForDevelopment","responseTokenProp","baseUrl","logoutRedirect","configForProduction","window","location","hostname","debug","testing","base","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","plugin","baseConfig","developmentLogging","start","then","setRoot","FaqStore","http","withBaseUrl","page","number","getItems","filter","include","sort","query","sortString","Object","keys","length","includeQuery","join","fetch","response","json","_items","data","results","catch","console","log","err","createItem","item","method","body","undefined","CreateFaq","controller","faqStore","faq","create","webpage_id","category_id","ok","Faq","dialogService","filters","getFaqs","search","searchText","question","openFaqCreationDialog","open","viewModel","model","wasCancelled","output","Login","heading","email","password","login","showError"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {FetchConfig, AuthorizeStep} from 'aurelia-auth';\n\n@inject(Router, FetchConfig)\nexport class App {\n  constructor(router, fetchConfig) {\n    this.router = router;\n    this.fetchConfig = fetchConfig;\n  }\n\n  activate() {\n    this.fetchConfig.configure();\n  }\n\n  configureRouter(config, router) {\n    config.title = 'Athena Desk';\n    config.addPipelineStep('authorize', AuthorizeStep);\n\n    config.map([\n      {\n        route: ['', 'faq'],\n        name: 'faq',\n        moduleId: 'views/faq/faq',\n        nav: true,\n        auth: true,\n        title: 'Faqs'\n      },\n      {\n        route: 'login',\n        name: 'login',\n        moduleId: 'views/login/login',\n        nav: true,\n        title: 'Login'\n      }\n    ]);\n\n    this.router = router;\n  }\n}\n\n","const configForDevelopment = {\n  responseTokenProp: 'token',\n  baseUrl: 'http://localhost:3000/',\n  logoutRedirect: '/#/login'\n};\n\nconst configForProduction = {\n  responseTokenProp: 'token',\n  baseUrl: 'http://faq-server.herokuapp.com'\n};\n\nlet config;\n\nif (window.location.hostname === 'localhost') {\n  config = configForDevelopment;\n} else {\n  config = configForProduction;\n}\n\n\nexport default config;\n","export default {\n  debug: true,\n  testing: true,\n  base: 'http://localhost:3000/'\n};\n","import environment from './environment';\nimport config from './auth-config';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-dialog')\n    .plugin('aurelia-auth', baseConfig => {\n      baseConfig.configure(config);\n    });\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework';\nimport {buildQueryString} from 'aurelia-path';\nimport {format} from 'objection-find-query';\nimport {HttpClient, json} from 'aurelia-fetch-client';\nimport environment from '../environment';\n\n@inject(HttpClient)\nexport class FaqStore {\n\n  constructor(http) {\n    http.configure(config => {\n      return config\n        .withBaseUrl(environment.base);\n    });\n\n    this.http = http;\n    this.page = {\n      number: 0\n    };\n  }\n\n\n  getItems(filter, include, page, sort) {\n    let query = 'faqs';\n    let sortString = {sort: sort ? sort : '-id'};\n    if (filter && Object.keys(filter).length) {\n      query = `${query}?${buildQueryString(format(filter, 'where'))}`;\n    }\n\n    if (include) {\n      let includeQuery = {include: `[${include.join(',')}]`};\n      query = filter && Object.keys(filter).length ? `${query}&${buildQueryString(includeQuery)}` : `${query}?${buildQueryString(includeQuery)}`;\n    }\n\n    if (page) {\n      if (page === 'next') {\n        this.page.number = this.page.number + 1;\n      } else {\n        this.page.number = this.page.number - 1;\n      }\n      query = `${query}&page[number]=${this.page.number}`;\n    }\n\n    if (sortString) {\n      query = `${query}&${buildQueryString(sortString)}`;\n    }\n\n\n    return this.http.fetch(query)\n      .then(response => response.json())\n      .then(data => {\n        this._items = data.results;\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  createItem(item) {\n    return this.http.fetch('faqs', {\n      method: 'POST',\n      body: json(item)\n    })\n    .then(success => {\n      this.getItems(undefined, ['webpage', 'category']);\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  get items() {\n    return this._items;\n  }\n}\n\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {DialogController} from 'aurelia-dialog';\nimport {inject} from 'aurelia-framework';\nimport {FaqStore} from '../../models/faq';\n\n@inject(DialogController, FaqStore)\nexport class CreateFaq {\n\n  constructor(controller, faqStore) {\n    this.controller = controller;\n    this.faqStore = faqStore;\n  }\n\n  activate(faq) {\n    this.faq = faq;\n  }\n\n  create(faq) {\n    faq.webpage_id = 1;\n    faq.category_id = 1;\n    this.faqStore.createItem(faq);\n    this.controller.ok();\n  }\n\n}\n","import {inject} from 'aurelia-framework';\nimport {FaqStore} from '../../models/faq';\nimport {DialogService} from 'aurelia-dialog';\nimport {CreateFaq} from './create-faq';\n\n@inject(FaqStore, DialogService)\nexport class Faq {\n  filters = {};\n  include = ['webpage', 'category'];\n\n  constructor(faqStore, dialogService) {\n    this.faqStore = faqStore;\n    this.dialogService = dialogService;\n  }\n\n  activate() {\n    this.faqStore.getItems(this.filters, this.include);\n  }\n\n  getFaqs() {\n    if (this.filters.search && !this.searchText) {\n      delete this.filters.search;\n    }\n\n    if (this.searchText) {\n      this.filters.search = {question: this.searchText};\n    }\n\n    this.faqStore.getItems(this.filters, this.include);\n  }\n\n  openFaqCreationDialog(faq) {\n    this.dialogService.open({ viewModel: CreateFaq, model: faq}).then(response => {\n      if (!response.wasCancelled) {\n        console.log('good - ', response.output);\n      } else {\n        console.log('bad');\n      }\n      console.log(response.output);\n    });\n  }\n}\n","import {AuthService} from 'aurelia-auth';\nimport {inject} from 'aurelia-framework';\n\n@inject(AuthService)\nexport class Login {\n  constructor(auth) {\n    this.auth = auth;\n  }\n\n  heading = 'Login';\n\n  email='';\n  password='';\n\n  login() {\n    return this.auth.login(this.email, this.password)\n      .then(response => {\n        console.log('success logged ' + response);\n      })\n      .catch(err => {\n        console.log('login failure');\n        this.showError = true;\n      });\n  }\n}\n"],"sourceRoot":"../src"}